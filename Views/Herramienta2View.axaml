<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="VManager.Views.Herramienta2View"
             x:DataType="vm:Herramienta2ViewModel"
             xmlns:vm="using:VManager.ViewModels">
    
    <Border 
        BorderBrush="{DynamicResource BorderBrushPrimary}" 
        BorderThickness="2" 
        CornerRadius="10" 
        Padding="15" 
        Margin="20"
        Background="{DynamicResource PanelBackgroundBrush}">
        
    <StackPanel Margin="20" Spacing="10"  HorizontalAlignment="Center" VerticalAlignment="Center">
        
        <!-- Bot칩n para refrescar codecs -->
        <Button Content="游딎 Regenerar cach칠"
                Command="{Binding RefreshCodecsCommand}"
                Width="150"
                Margin="0,0,0,30"
                HorizontalAlignment="Center"/>
        
        <!-- Selecci칩n de archivo de video -->
        <TextBlock Text="Seleccionar Video:" FontSize="14" Margin="0,0,0,3"/>
        <DockPanel>
            <Button Content="Examinar" Command="{Binding BrowseCommand}" Width="100" Margin="0,0,10,0"/>
            <TextBox Text="{Binding VideoPath}" IsReadOnly="True" Watermark="Ruta del video" Width="300"/>
        </DockPanel>
        
        <!-- Duraci칩n 
        <TextBlock Text="Duraci칩n (HH:mm:ss):" FontSize="14" Margin="0,10,0,5"/>
        <TextBox Text="{Binding Duration}" Width="150" Watermark="Ej: 00:00:30"/> -->
        
        <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
            <TextBlock Text="Porcentaje de Calidad:" FontSize="14" VerticalAlignment="Center"/>
            <TextBox Text="{Binding PorcentajeCompresionUsuario}" Width="10" Margin="0,0,0,0"/>
            <TextBlock Text="%" FontSize="14" VerticalAlignment="Center"/>
            <Button Width="30" Margin="0,0,5,0">
                <Button.Content>
                    <TextBlock Text="?" FontWeight="Bold"/>
                </Button.Content>
                <ToolTip.Tip>
                    <TextBlock MaxWidth="400" TextWrapping="Wrap">
                        <Run Text="El porcentaje de calidad controla qu칠 tan buena ser치 la calidad del video final."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Valores m치s altos (ej: 80-90%) = Mejor calidad, archivos m치s grandes"/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Valores m치s bajos (ej: 30-50%) = Menor calidad, archivos m치s peque침os"/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Recomendado: 70-80% para un buen equilibrio entre calidad y tama침o."/>
                    </TextBlock>
                </ToolTip.Tip>
            </Button>
        </StackPanel>
        
        <!-- Video Codec -->
        <TextBlock Text="C칩dec de Video:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Margin="0,10,0,0"/>
        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
            <Button Content="?" Width="30" Margin="0,0,5,0" FontWeight="Bold"> 
                <ToolTip.Tip>
                    <TextBlock MaxWidth="400" TextWrapping="Wrap">
                        <Run Text="La opci칩n predeterminada es la mejor para la mayor칤a de los casos."/>
                        <Run Text="Se prioriza la aceleraci칩n por hardware (que se utilice tu GPU)."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Un c칩dec de video b치sicamente comprime y descomprime video para ahorrar espacio o transmitir m치s r치pido."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Si prefieres usar la CPU en lugar de la GPU, usa codecs como 'libx264'."/>
                        <Run Text="La ventaja de usar el CPU es que provee la mejor calidad. La desventaja es que es mucho m치s lento."/>
                        <Run Text="Otros algoritmos de codificaci칩n est치n disponibles, aunque no son recomendables."/>
                    </TextBlock>
                </ToolTip.Tip>
            </Button>
            <ComboBox ItemsSource="{Binding AvailableVideoCodecs}" 
                      SelectedItem="{Binding SelectedVideoCodec, Mode=TwoWay}"
                      Width="200"/>
        </StackPanel>

        <!-- Audio Codec -->
        <TextBlock Text="C칩dec de Audio:" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Margin="0,10,0,0"/>
        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
            <Button Content="?" Width="30" Margin="0,0,5,0" FontWeight="Bold"> 
                <ToolTip.Tip>
                    <TextBlock MaxWidth="400" TextWrapping="Wrap">
                        <Run Text="La opci칩n predeterminada es la mejor para la mayor칤a de los casos."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="Un c칩dec de audio b치sicamente comprime y descomprime audio para ahorrar espacio o transmitir m치s r치pido."/>
                        <LineBreak/>
                        <LineBreak/>
                        <Run Text="FLAC permite una calidad de audio excepcional, con la desventaja de consumir mucho espacio de almacenamiento."/>
                        <Run Text="Otros formatos de audio est치n disponibles, aunque no son recomendables."/>
                    </TextBlock>
                </ToolTip.Tip>
            </Button>
            <ComboBox ItemsSource="{Binding AvailableAudioCodecs}" 
                      SelectedItem="{Binding SelectedAudioCodec, Mode=TwoWay}"
                      Width="200"/>
        </StackPanel>

        <!-- Barra de progreso -->
        <ProgressBar Minimum="0" Maximum="100" Value="{Binding Progress}" Height="20" Width="420" Margin="0,30,0,0"/>
        
        <!-- Bot칩n para comprimir -->
        <Button Content="Comprimir Video" Command="{Binding CompressCommand}" Width="130" Margin="0,5,0,0" HorizontalAlignment="Center"/>

        <!-- Estado -->
        <TextBlock Text="{Binding Status}" FontSize="14" Margin="0,3,0,0" HorizontalAlignment="Center"/>
        
        <Button Content="Mostrar archivo en carpeta"
                IsVisible="{Binding IsFileReadyVisible}"
                Command="{Binding ShowFileInFolderCommand}"/>
        
    </StackPanel>
    </Border>
    
</UserControl>
